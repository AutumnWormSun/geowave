{"paragraphs":[{"text":"%md\n## Welcome to the GeoWave WMS Example (EMR Version).\n##### This is a live note - you can run the code yourself.\n\n### Expectation\n<p>\nThis example is intended to be run following the <b>GeoWave KMeans Example</b> note.<br>\nYou will configure GeoServer to provide the GDELT and KMeans data via WMS layers.<br>\n<br>\nThese layers will then be viewable on the Leaflet map.\n</p>\n\n### Setup\n<p>\nIn order for the Leaflet map to display the WMS layers, you'll need to edit the<br>\nURL's of the three overlays using your current EMR master node URL.<br>\n</p>","user":"anonymous","dateUpdated":"2017-08-14T21:45:15+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502746477978_1192044521","id":"20170814-213437_958402212","dateCreated":"2017-08-14T21:34:37+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:8531","dateFinished":"2017-08-14T21:45:15+0000","dateStarted":"2017-08-14T21:45:15+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>Welcome to the GeoWave WMS Example (EMR Version).</h2>\n<h5>This is a live note - you can run the code yourself.</h5>\n<h3>Expectation</h3>\n<p>\nThis example is intended to be run following the <b>GeoWave KMeans Example</b> note.<br>\nYou will configure GeoServer to provide the GDELT and KMeans data via WMS layers.<br>\n<br>\nThese layers will then be viewable on the Leaflet map.\n</p>\n<h3>Setup</h3>\n<p>\nIn order for the Leaflet map to display the WMS layers, you'll need to edit the<br>\nURL's of the three overlays using your current EMR master node URL.<br>\n</p>\n"}]}},{"title":"Add Layers to GeoServer","text":"%sh\n# add gdelt layer\ngeowave gs addlayer gdelt -a all\n\n# download and set the subsample style on gdelt\ncd /mnt/tmp\nwget s3.amazonaws.com/geowave/latest/scripts/emr/quickstart/SubsamplePoints.sld\ngeowave gs addstyle SubsamplePoints -sld /mnt/tmp/SubsamplePoints.sld\ngeowave gs setls -sn SubsamplePoints gdeltevent\n\n# add kmeans layers and set styles\ngeowave gs addlayer kmeans -a all\ngeowave gs setls -sn point kmeans-centroids\ngeowave gs setls -sn line kmeans-hulls","dateUpdated":"2017-08-14T21:38:02+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{"SOUTH":"","EAST":"","NORTH":"","WEST":""},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"14 Aug 21:38:03 DEBUG [util.Shell] - setsid exited with exit code 0\n14 Aug 21:38:03 DEBUG [security.Groups] -  Creating new Groups object\n14 Aug 21:38:03 DEBUG [util.NativeCodeLoader] - Trying to load the custom-built native-hadoop library...\n14 Aug 21:38:03 DEBUG [util.NativeCodeLoader] - Failed to load native-hadoop with error: java.lang.UnsatisfiedLinkError: no hadoop in java.library.path\n14 Aug 21:38:03 DEBUG [util.NativeCodeLoader] - java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\n14 Aug 21:38:03 WARN [util.NativeCodeLoader] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n14 Aug 21:38:03 DEBUG [util.PerformanceAdvisory] - Falling back to shell based\n14 Aug 21:38:03 DEBUG [security.JniBasedUnixGroupsMappingWithFallback] - Group mapping impl=org.apache.hadoop.security.ShellBasedUnixGroupsMapping\n14 Aug 21:38:03 DEBUG [security.Groups] - Group mapping impl=org.apache.hadoop.security.JniBasedUnixGroupsMappingWithFallback; cacheTimeout=300000; warningDeltaMs=5000\n14 Aug 21:38:03 DEBUG [lib.MutableMetricsFactory] - field org.apache.hadoop.metrics2.lib.MutableRate org.apache.hadoop.security.UserGroupInformation$UgiMetrics.loginSuccess with annotation @org.apache.hadoop.metrics2.annotation.Metric(about=, sampleName=Ops, always=false, type=DEFAULT, valueName=Time, value=[Rate of successful kerberos logins and latency (milliseconds)])\n14 Aug 21:38:03 DEBUG [lib.MutableMetricsFactory] - field org.apache.hadoop.metrics2.lib.MutableRate org.apache.hadoop.security.UserGroupInformation$UgiMetrics.loginFailure with annotation @org.apache.hadoop.metrics2.annotation.Metric(about=, sampleName=Ops, always=false, type=DEFAULT, valueName=Time, value=[Rate of failed kerberos logins and latency (milliseconds)])\n14 Aug 21:38:03 DEBUG [lib.MutableMetricsFactory] - field org.apache.hadoop.metrics2.lib.MutableRate org.apache.hadoop.security.UserGroupInformation$UgiMetrics.getGroups with annotation @org.apache.hadoop.metrics2.annotation.Metric(about=, sampleName=Ops, always=false, type=DEFAULT, valueName=Time, value=[GetGroups])\n14 Aug 21:38:03 DEBUG [impl.MetricsSystemImpl] - UgiMetrics, User and group related metrics\n14 Aug 21:38:03 DEBUG [util.KerberosName] - Kerberos krb5 configuration not found, setting default realm to empty\n14 Aug 21:38:03 DEBUG [security.UserGroupInformation] - hadoop login\n14 Aug 21:38:03 DEBUG [security.UserGroupInformation] - hadoop login commit\n14 Aug 21:38:03 DEBUG [security.UserGroupInformation] - using local user:UnixPrincipal: zeppelin\n14 Aug 21:38:03 DEBUG [security.UserGroupInformation] - Using user: \"UnixPrincipal: zeppelin\" with name zeppelin\n14 Aug 21:38:03 DEBUG [security.UserGroupInformation] - User entry: \"zeppelin\"\n14 Aug 21:38:03 DEBUG [security.UserGroupInformation] - UGI loginUser:zeppelin (auth:SIMPLE)\n14 Aug 21:38:04 INFO [zookeeper.RecoverableZooKeeper] - Process identifier=hconnection-0x20d525 connecting to ZooKeeper ensemble=ip-10-0-0-59:2181\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:host.name=ip-10-0-0-59.ec2.internal\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.version=1.8.0_141\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.vendor=Oracle Corporation\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.141-1.b16.32.amzn1.x86_64/jre\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.class.path=/usr/local/geowave-0.9.5-apache/tools/geowave-tools-0.9.5-apache.jar:/usr/local/geowave-0.9.5-apache/tools/plugins/*\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.io.tmpdir=/tmp\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:java.compiler=<NA>\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:os.name=Linux\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:os.arch=amd64\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:os.version=4.4.35-33.55.amzn1.x86_64\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:user.name=zeppelin\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:user.home=/var/lib/zeppelin\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Client environment:user.dir=/mnt/var/lib/zeppelin\n14 Aug 21:38:04 INFO [zookeeper.ZooKeeper] - Initiating client connection, connectString=ip-10-0-0-59:2181 sessionTimeout=90000 watcher=org.apache.hadoop.hbase.zookeeper.PendingWatcher@38e79ae3\n14 Aug 21:38:04 DEBUG [zookeeper.ClientCnxn] - zookeeper.disableAutoWatchReset is false\n14 Aug 21:38:04 INFO [zookeeper.ClientCnxn] - Opening socket connection to server ip-10-0-0-59.ec2.internal/10.0.0.59:2181. Will not attempt to authenticate using SASL (unknown error)\n14 Aug 21:38:04 INFO [zookeeper.ClientCnxn] - Socket connection established to ip-10-0-0-59.ec2.internal/10.0.0.59:2181, initiating session\n14 Aug 21:38:04 DEBUG [zookeeper.ClientCnxn] - Session establishment request sent on ip-10-0-0-59.ec2.internal/10.0.0.59:2181\n14 Aug 21:38:04 INFO [zookeeper.ClientCnxn] - Session establishment complete on server ip-10-0-0-59.ec2.internal/10.0.0.59:2181, sessionid = 0x15de216eac80013, negotiated timeout = 40000\n14 Aug 21:38:04 DEBUG [zookeeper.ZooKeeperWatcher] - hconnection-0x20d5250x0, quorum=ip-10-0-0-59:2181, baseZNode=/hbase Received ZooKeeper Event, type=None, state=SyncConnected, path=null\n14 Aug 21:38:04 DEBUG [zookeeper.ZooKeeperWatcher] - hconnection-0x20d525-0x15de216eac80013 connected\n14 Aug 21:38:04 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80013, packet:: clientPath:null serverPath:null finished:false header:: 1,3  replyHeader:: 1,619,0  request:: '/hbase/hbaseid,F  response:: s{29,29,1502736763194,1502736763194,0,0,0,0,67,0,29} \n14 Aug 21:38:04 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80013, packet:: clientPath:null serverPath:null finished:false header:: 2,4  replyHeader:: 2,619,0  request:: '/hbase/hbaseid,F  response:: #ffffffff000146d61737465723a31363030301f31101affffffb946ffffff8a5f50425546a2432653166663864612d386535642d343736652d383932632d663165653031663537653531,s{29,29,1502736763194,1502736763194,0,0,0,0,67,0,29} \n14 Aug 21:38:04 DEBUG [ipc.AbstractRpcClient] - Codec=org.apache.hadoop.hbase.codec.KeyValueCodec@72ade7e3, compressor=null, tcpKeepAlive=true, tcpNoDelay=true, connectTO=10000, readTO=20000, writeTO=60000, minIdleTimeBeforeClose=120000, maxRetries=0, fallbackAllowed=false, bind address=null\n14 Aug 21:38:04 DEBUG [geoserver.GeoServerRestClient] - Adapter list for gdelt with adapterId = ALL: \n14 Aug 21:38:04 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80013, packet:: clientPath:null serverPath:null finished:false header:: 3,4  replyHeader:: 3,619,0  request:: '/hbase/meta-region-server,F  response:: #ffffffff0001a726567696f6e7365727665723a3136303230ffffff90ffffff9f48ffffffee3effffffd5136450425546a26a1a69702d31302d302d302d3138382e6563322e696e7465726e616c10ffffff947d18fffffff0ffffffc8ffffffdcffffff90ffffffde2b100183,s{62,62,1502736769569,1502736769569,0,0,0,0,79,0,62} \n14 Aug 21:38:04 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80013, packet:: clientPath:null serverPath:null finished:false header:: 4,8  replyHeader:: 4,619,0  request:: '/hbase,F  response:: v{'replication,'meta-region-server,'rs,'splitWAL,'backup-masters,'table-lock,'flush-table-proc,'region-in-transition,'online-snapshot,'master,'switch,'running,'recovering-regions,'draining,'namespace,'hbaseid,'table} \n14 Aug 21:38:04 DEBUG [ipc.RpcClientImpl] - Use SIMPLE authentication for service ClientService, sasl=false\n14 Aug 21:38:04 DEBUG [ipc.RpcClientImpl] - Connecting to ip-10-0-0-188.ec2.internal/10.0.0.188:16020\n14 Aug 21:38:04 DEBUG [ipc.RpcClientImpl] - Use SIMPLE authentication for service ClientService, sasl=false\n14 Aug 21:38:04 DEBUG [ipc.RpcClientImpl] - Connecting to ip-10-0-0-69.ec2.internal/10.0.0.69:16020\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionProvider', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionProvider', but ApplicationContext is unset.\nAug 14, 2017 9:38:05 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\n14 Aug 21:38:05 ERROR [persist.PersistableFactory] - '600' already registered for class 'mil.nga.giat.geowave.adapter.raster.Resolution'.  Cannot register 'class mil.nga.giat.geowave.format.twitter.TwitterIngestPlugin' with id '600'\n14 Aug 21:38:05 ERROR [persist.PersistableFactory] - '601' already registered for class 'mil.nga.giat.geowave.adapter.raster.adapter.CompoundHierarchicalIndexStrategyWrapper'.  Cannot register 'class mil.nga.giat.geowave.format.twitter.TwitterIngestPlugin$IngestTwitterFromHdfs' with id '601'\n14 Aug 21:38:05 INFO [util.FeatureDataUtils] - Generating patched classloader\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - getAdapterInfo for id = ALL\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - > Adapter ID: gdeltevent\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - > Adapter Type: FeatureDataAdapter\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - id is null or all\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - > 'gdeltevent' adapter passed filter\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - getStoreAdapterInfo(gdelt) got 1 ids\n14 Aug 21:38:05 DEBUG [geoserver.GeoServerRestClient] - Finished retrieving adapter list\n14 Aug 21:38:07 DEBUG [geoserver.GeoServerRestClient] - Checking for existing feature layer: gdeltevent\n14 Aug 21:38:07 DEBUG [geoserver.GeoServerRestClient] - Get feature layer: gdeltevent returned 404\nAdd GeoServer layer for 'gdelt: OK\n{\n  \"description\": \"Successfully added:\",\n  \"layers\": [  {\n    \"id\": \"gdeltevent\",\n    \"type\": \"vector\"\n  }]\n}\n--2017-08-14 21:38:09--  http://s3.amazonaws.com/geowave/latest/scripts/emr/quickstart/SubsamplePoints.sld\nResolving s3.amazonaws.com (s3.amazonaws.com)... 54.231.120.130\nConnecting to s3.amazonaws.com (s3.amazonaws.com)|54.231.120.130|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 2237 (2.2K) [binary/octet-stream]\nSaving to: ‘SubsamplePoints.sld’\n\n     0K ..                                                    100%  107M=0s\n\n2017-08-14 21:38:09 (107 MB/s) - ‘SubsamplePoints.sld’ saved [2237/2237]\n\nAdd style for 'SubsamplePoints' on GeoServer: OK\nSet style for GeoServer layer 'gdeltevent: OK\n\n14 Aug 21:38:12 DEBUG [util.Shell] - setsid exited with exit code 0\n14 Aug 21:38:12 DEBUG [security.Groups] -  Creating new Groups object\n14 Aug 21:38:12 DEBUG [util.NativeCodeLoader] - Trying to load the custom-built native-hadoop library...\n14 Aug 21:38:12 DEBUG [util.NativeCodeLoader] - Failed to load native-hadoop with error: java.lang.UnsatisfiedLinkError: no hadoop in java.library.path\n14 Aug 21:38:12 DEBUG [util.NativeCodeLoader] - java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\n14 Aug 21:38:12 WARN [util.NativeCodeLoader] - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n14 Aug 21:38:12 DEBUG [util.PerformanceAdvisory] - Falling back to shell based\n14 Aug 21:38:12 DEBUG [security.JniBasedUnixGroupsMappingWithFallback] - Group mapping impl=org.apache.hadoop.security.ShellBasedUnixGroupsMapping\n14 Aug 21:38:12 DEBUG [security.Groups] - Group mapping impl=org.apache.hadoop.security.JniBasedUnixGroupsMappingWithFallback; cacheTimeout=300000; warningDeltaMs=5000\n14 Aug 21:38:13 DEBUG [lib.MutableMetricsFactory] - field org.apache.hadoop.metrics2.lib.MutableRate org.apache.hadoop.security.UserGroupInformation$UgiMetrics.loginSuccess with annotation @org.apache.hadoop.metrics2.annotation.Metric(always=false, about=, sampleName=Ops, type=DEFAULT, valueName=Time, value=[Rate of successful kerberos logins and latency (milliseconds)])\n14 Aug 21:38:13 DEBUG [lib.MutableMetricsFactory] - field org.apache.hadoop.metrics2.lib.MutableRate org.apache.hadoop.security.UserGroupInformation$UgiMetrics.loginFailure with annotation @org.apache.hadoop.metrics2.annotation.Metric(always=false, about=, sampleName=Ops, type=DEFAULT, valueName=Time, value=[Rate of failed kerberos logins and latency (milliseconds)])\n14 Aug 21:38:13 DEBUG [lib.MutableMetricsFactory] - field org.apache.hadoop.metrics2.lib.MutableRate org.apache.hadoop.security.UserGroupInformation$UgiMetrics.getGroups with annotation @org.apache.hadoop.metrics2.annotation.Metric(always=false, about=, sampleName=Ops, type=DEFAULT, valueName=Time, value=[GetGroups])\n14 Aug 21:38:13 DEBUG [impl.MetricsSystemImpl] - UgiMetrics, User and group related metrics\n14 Aug 21:38:13 DEBUG [util.KerberosName] - Kerberos krb5 configuration not found, setting default realm to empty\n14 Aug 21:38:13 DEBUG [security.UserGroupInformation] - hadoop login\n14 Aug 21:38:13 DEBUG [security.UserGroupInformation] - hadoop login commit\n14 Aug 21:38:13 DEBUG [security.UserGroupInformation] - using local user:UnixPrincipal: zeppelin\n14 Aug 21:38:13 DEBUG [security.UserGroupInformation] - Using user: \"UnixPrincipal: zeppelin\" with name zeppelin\n14 Aug 21:38:13 DEBUG [security.UserGroupInformation] - User entry: \"zeppelin\"\n14 Aug 21:38:13 DEBUG [security.UserGroupInformation] - UGI loginUser:zeppelin (auth:SIMPLE)\n14 Aug 21:38:13 INFO [zookeeper.RecoverableZooKeeper] - Process identifier=hconnection-0x7c9d8e2 connecting to ZooKeeper ensemble=ip-10-0-0-59:2181\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:host.name=ip-10-0-0-59.ec2.internal\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.version=1.8.0_141\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.vendor=Oracle Corporation\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.141-1.b16.32.amzn1.x86_64/jre\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.class.path=/usr/local/geowave-0.9.5-apache/tools/geowave-tools-0.9.5-apache.jar:/usr/local/geowave-0.9.5-apache/tools/plugins/*\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.io.tmpdir=/tmp\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:java.compiler=<NA>\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:os.name=Linux\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:os.arch=amd64\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:os.version=4.4.35-33.55.amzn1.x86_64\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:user.name=zeppelin\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:user.home=/var/lib/zeppelin\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Client environment:user.dir=/mnt/tmp\n14 Aug 21:38:13 INFO [zookeeper.ZooKeeper] - Initiating client connection, connectString=ip-10-0-0-59:2181 sessionTimeout=90000 watcher=org.apache.hadoop.hbase.zookeeper.PendingWatcher@6f45df59\n14 Aug 21:38:13 DEBUG [zookeeper.ClientCnxn] - zookeeper.disableAutoWatchReset is false\n14 Aug 21:38:13 INFO [zookeeper.ClientCnxn] - Opening socket connection to server ip-10-0-0-59.ec2.internal/10.0.0.59:2181. Will not attempt to authenticate using SASL (unknown error)\n14 Aug 21:38:13 INFO [zookeeper.ClientCnxn] - Socket connection established to ip-10-0-0-59.ec2.internal/10.0.0.59:2181, initiating session\n14 Aug 21:38:13 DEBUG [zookeeper.ClientCnxn] - Session establishment request sent on ip-10-0-0-59.ec2.internal/10.0.0.59:2181\n14 Aug 21:38:13 INFO [zookeeper.ClientCnxn] - Session establishment complete on server ip-10-0-0-59.ec2.internal/10.0.0.59:2181, sessionid = 0x15de216eac80015, negotiated timeout = 40000\n14 Aug 21:38:13 DEBUG [zookeeper.ZooKeeperWatcher] - hconnection-0x7c9d8e20x0, quorum=ip-10-0-0-59:2181, baseZNode=/hbase Received ZooKeeper Event, type=None, state=SyncConnected, path=null\n14 Aug 21:38:13 DEBUG [zookeeper.ZooKeeperWatcher] - hconnection-0x7c9d8e2-0x15de216eac80015 connected\n14 Aug 21:38:13 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80015, packet:: clientPath:null serverPath:null finished:false header:: 1,3  replyHeader:: 1,621,0  request:: '/hbase/hbaseid,F  response:: s{29,29,1502736763194,1502736763194,0,0,0,0,67,0,29} \n14 Aug 21:38:13 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80015, packet:: clientPath:null serverPath:null finished:false header:: 2,4  replyHeader:: 2,621,0  request:: '/hbase/hbaseid,F  response:: #ffffffff000146d61737465723a31363030301f31101affffffb946ffffff8a5f50425546a2432653166663864612d386535642d343736652d383932632d663165653031663537653531,s{29,29,1502736763194,1502736763194,0,0,0,0,67,0,29} \n14 Aug 21:38:13 DEBUG [ipc.AbstractRpcClient] - Codec=org.apache.hadoop.hbase.codec.KeyValueCodec@5f20155b, compressor=null, tcpKeepAlive=true, tcpNoDelay=true, connectTO=10000, readTO=20000, writeTO=60000, minIdleTimeBeforeClose=120000, maxRetries=0, fallbackAllowed=false, bind address=null\n14 Aug 21:38:13 DEBUG [geoserver.GeoServerRestClient] - Adapter list for kmeans with adapterId = ALL: \n14 Aug 21:38:13 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80015, packet:: clientPath:null serverPath:null finished:false header:: 3,4  replyHeader:: 3,621,0  request:: '/hbase/meta-region-server,F  response:: #ffffffff0001a726567696f6e7365727665723a3136303230ffffff90ffffff9f48ffffffee3effffffd5136450425546a26a1a69702d31302d302d302d3138382e6563322e696e7465726e616c10ffffff947d18fffffff0ffffffc8ffffffdcffffff90ffffffde2b100183,s{62,62,1502736769569,1502736769569,0,0,0,0,79,0,62} \n14 Aug 21:38:13 DEBUG [zookeeper.ClientCnxn] - Reading reply sessionid:0x15de216eac80015, packet:: clientPath:null serverPath:null finished:false header:: 4,8  replyHeader:: 4,621,0  request:: '/hbase,F  response:: v{'replication,'meta-region-server,'rs,'splitWAL,'backup-masters,'table-lock,'flush-table-proc,'region-in-transition,'online-snapshot,'master,'switch,'running,'recovering-regions,'draining,'namespace,'hbaseid,'table} \n14 Aug 21:38:13 DEBUG [ipc.RpcClientImpl] - Use SIMPLE authentication for service ClientService, sasl=false\n14 Aug 21:38:13 DEBUG [ipc.RpcClientImpl] - Connecting to ip-10-0-0-188.ec2.internal/10.0.0.188:16020\n14 Aug 21:38:13 DEBUG [ipc.RpcClientImpl] - Use SIMPLE authentication for service ClientService, sasl=false\n14 Aug 21:38:13 DEBUG [ipc.RpcClientImpl] - Connecting to ip-10-0-0-69.ec2.internal/10.0.0.69:16020\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionProvider', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'GeoServerResourceLoader', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionProvider', but ApplicationContext is unset.\nAug 14, 2017 9:38:14 PM org.geoserver.platform.GeoServerExtensions checkContext\nWARNING: Extension lookup 'ExtensionFilter', but ApplicationContext is unset.\n14 Aug 21:38:14 ERROR [persist.PersistableFactory] - '600' already registered for class 'mil.nga.giat.geowave.adapter.raster.Resolution'.  Cannot register 'class mil.nga.giat.geowave.format.twitter.TwitterIngestPlugin' with id '600'\n14 Aug 21:38:14 ERROR [persist.PersistableFactory] - '601' already registered for class 'mil.nga.giat.geowave.adapter.raster.adapter.CompoundHierarchicalIndexStrategyWrapper'.  Cannot register 'class mil.nga.giat.geowave.format.twitter.TwitterIngestPlugin$IngestTwitterFromHdfs' with id '601'\n14 Aug 21:38:14 INFO [util.FeatureDataUtils] - Generating patched classloader\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - getAdapterInfo for id = ALL\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - > Adapter ID: kmeans-centroids\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - > Adapter Type: FeatureDataAdapter\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - id is null or all\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - > 'kmeans-centroids' adapter passed filter\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - getAdapterInfo for id = ALL\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - > Adapter ID: kmeans-hulls\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - > Adapter Type: FeatureDataAdapter\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - id is null or all\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - > 'kmeans-hulls' adapter passed filter\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - getStoreAdapterInfo(kmeans) got 2 ids\n14 Aug 21:38:14 DEBUG [geoserver.GeoServerRestClient] - Finished retrieving adapter list\n14 Aug 21:38:15 DEBUG [geoserver.GeoServerRestClient] - Checking for existing feature layer: kmeans-centroids\n14 Aug 21:38:15 DEBUG [geoserver.GeoServerRestClient] - Get feature layer: kmeans-centroids returned 404\n14 Aug 21:38:15 DEBUG [geoserver.GeoServerRestClient] - Checking for existing feature layer: kmeans-hulls\n14 Aug 21:38:15 DEBUG [geoserver.GeoServerRestClient] - Get feature layer: kmeans-hulls returned 404\nAdd GeoServer layer for 'kmeans: OK\n{\n  \"description\": \"Successfully added:\",\n  \"layers\":   [\n        {\n      \"id\": \"kmeans-centroids\",\n      \"type\": \"vector\"\n    },\n        {\n      \"id\": \"kmeans-hulls\",\n      \"type\": \"vector\"\n    }\n  ]\n}\nSet style for GeoServer layer 'kmeans-centroids: OK\n\nSet style for GeoServer layer 'kmeans-hulls: OK\n\n"}]},"apps":[],"jobName":"paragraph_1502746439108_1639245336","id":"20170809-193350_312794083","dateCreated":"2017-08-14T21:33:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8532","user":"anonymous","dateFinished":"2017-08-14T21:38:18+0000","dateStarted":"2017-08-14T21:38:02+0000"},{"text":"%angular\r\n\r\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css\" />\r\n<h3>GeoWave Leaflet Map</h3>\r\n<div id=\"map\" style=\"height: 600px; width: 100%\"></div>\r\n\r\n<script type=\"text/javascript\">\r\nfunction initMap() {\r\n    var map = L.map('map').setView([55.00, 5.00], 5);\r\n    \r\n    var basemaps = {\r\n        OSM: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\r\n            maxZoom: 15,\r\n            minZoom: 2\r\n        })\r\n    };\r\n    \r\n    var overlays = {\r\n        GDELT:L.tileLayer.wms('http://ec2-184-72-79-89.compute-1.amazonaws.com:8000/geoserver/geowave/wms?', {\r\n            layers: 'geowave:gdeltevent',\r\n            format: 'image/png',\r\n            transparent: true\r\n        }),\r\n    \r\n        Centroids:L.tileLayer.wms('http://ec2-184-72-79-89.compute-1.amazonaws.com:8000/geoserver/geowave/wms?', {\r\n            layers: 'geowave:kmeans-centroids',\r\n            format: 'image/png',\r\n            transparent: true\r\n        }),\r\n    \r\n        Hulls: L.tileLayer.wms('http://ec2-184-72-79-89.compute-1.amazonaws.com:8000/geoserver/geowave/wms?', {\r\n            layers: 'geowave:kmeans-hulls',\r\n            format: 'image/png',\r\n            transparent: true\r\n        })\r\n    };\r\n\r\n    L.control.layers(basemaps, overlays).addTo(map);\r\n    \r\n    basemaps.OSM.addTo(map);\r\n}\r\n\r\n// ensure we only load the script once, seems to cause issues otherwise\r\nif (window.L) {\r\n    initMap();\r\n} else {\r\n    console.log('Loading Leaflet library');\r\n    var sc = document.createElement('script');\r\n    sc.type = 'text/javascript';\r\n    sc.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js';\r\n    sc.onload = initMap;\r\n    sc.onerror = function(err) { alert(err); }\r\n    document.getElementsByTagName('head')[0].appendChild(sc);\r\n}\r\n</script>","dateUpdated":"2017-08-14T21:43:46+0000","config":{"tableHide":false,"editorSetting":{"language":"text","editOnDblClick":true},"colWidth":8,"editorMode":"ace/mode/undefined","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css\" />\r\n<h3>GeoWave Leaflet Map</h3>\r\n<div id=\"map\" style=\"height: 600px; width: 100%\"></div>\r\n\r\n<script type=\"text/javascript\">\r\nfunction initMap() {\r\n    var map = L.map('map').setView([55.00, 5.00], 5);\r\n    \r\n    var basemaps = {\r\n        OSM: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\r\n            maxZoom: 15,\r\n            minZoom: 2\r\n        })\r\n    };\r\n    \r\n    var overlays = {\r\n        GDELT:L.tileLayer.wms('http://ec2-184-72-79-89.compute-1.amazonaws.com:8000/geoserver/geowave/wms?', {\r\n            layers: 'geowave:gdeltevent',\r\n            format: 'image/png',\r\n            transparent: true\r\n        }),\r\n    \r\n        Centroids:L.tileLayer.wms('http://ec2-184-72-79-89.compute-1.amazonaws.com:8000/geoserver/geowave/wms?', {\r\n            layers: 'geowave:kmeans-centroids',\r\n            format: 'image/png',\r\n            transparent: true\r\n        }),\r\n    \r\n        Hulls: L.tileLayer.wms('http://ec2-184-72-79-89.compute-1.amazonaws.com:8000/geoserver/geowave/wms?', {\r\n            layers: 'geowave:kmeans-hulls',\r\n            format: 'image/png',\r\n            transparent: true\r\n        })\r\n    };\r\n\r\n    L.control.layers(basemaps, overlays).addTo(map);\r\n    \r\n    basemaps.OSM.addTo(map);\r\n}\r\n\r\n// ensure we only load the script once, seems to cause issues otherwise\r\nif (window.L) {\r\n    initMap();\r\n} else {\r\n    console.log('Loading Leaflet library');\r\n    var sc = document.createElement('script');\r\n    sc.type = 'text/javascript';\r\n    sc.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js';\r\n    sc.onload = initMap;\r\n    sc.onerror = function(err) { alert(err); }\r\n    document.getElementsByTagName('head')[0].appendChild(sc);\r\n}\r\n</script>"}]},"apps":[],"jobName":"paragraph_1502746439108_1639245336","id":"20170809-021534_2122057818","dateCreated":"2017-08-14T21:33:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8533","user":"anonymous","dateFinished":"2017-08-14T21:43:46+0000","dateStarted":"2017-08-14T21:43:46+0000"},{"text":"%sql\n","dateUpdated":"2017-08-14T21:33:59+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502746439109_1638860587","id":"20170809-165125_1681686532","dateCreated":"2017-08-14T21:33:59+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:8534"}],"name":"GeoWave WMS","id":"2CPK6MTT5","angularObjects":{"2BRWU4WXC:shared_process":[],"2AM1YV5CU:shared_process":[],"2AJXGMUUJ:shared_process":[],"2ANGGHHMQ:shared_process":[],"2AKK3QQXU:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}